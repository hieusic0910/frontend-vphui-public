{"ast":null,"code":"import _regeneratorRuntime from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"/Users/hieutran/Desktop/create-social-network-master/frontend/src/pages/Auth/SignUp.js\",\n    _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { withRouter } from 'react-router-dom';\nimport { useMutation } from '@apollo/client';\nimport { Spacing, Container } from 'components/Layout';\nimport { H1, Error } from 'components/Text';\nimport { InputText, Button } from 'components/Form';\nimport Head from 'components/Head';\nimport { SIGN_UP } from 'graphql/user';\nimport * as Routes from 'routes';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Root = styled(Container)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  align-items: center;\\n  margin-top: 60px;\\n\\n  @media (min-width: \", \") {\\n    justify-content: space-between;\\n    margin-top: 120px;\\n  }\\n\"])), function (p) {\n  return p.theme.screen.md;\n});\n_c = Root;\nvar Welcome = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  display: none;\\n  flex-direction: column;\\n  color: \", \";\\n  max-width: \", \";\\n\\n  @media (min-width: \", \") {\\n    display: flex;\\n  }\\n\"])), function (p) {\n  return p.theme.colors.white;\n}, function (p) {\n  return p.theme.screen.xs;\n}, function (p) {\n  return p.theme.screen.md;\n});\n_c2 = Welcome;\nvar Heading = styled(H1)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  margin-bottom: \", \";\\n\"])), function (p) {\n  return p.theme.spacing.sm;\n});\n_c3 = Heading;\nvar Form = styled.div(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  padding: \", \";\\n  border-radius: \", \";\\n  background-color: rgba(255, 255, 255, 0.8);\\n  width: 100%;\\n\\n  @media (min-width: \", \") {\\n    width: 450px;\\n  }\\n\"])), function (p) {\n  return p.theme.spacing.md;\n}, function (p) {\n  return p.theme.radius.sm;\n}, function (p) {\n  return p.theme.screen.sm;\n});\n/**\n * Sign Up page\n */\n\n_c4 = Form;\n\nvar SignUp = function SignUp(_ref) {\n  _s();\n\n  var history = _ref.history,\n      refetch = _ref.refetch;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState({\n    fullName: '',\n    username: '',\n    email: '',\n    password: ''\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      values = _useState4[0],\n      setValues = _useState4[1];\n\n  var _useMutation = useMutation(SIGN_UP),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      signup = _useMutation2[0],\n      loading = _useMutation2[1].loading;\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setValues(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, name, value)));\n  };\n\n  var validate = function validate() {\n    if (!fullName || !email || !username || !password) {\n      return 'All fields are required';\n    }\n\n    if (fullName.length > 50) {\n      return 'Full name no more than 50 characters';\n    }\n\n    var emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    if (!emailRegex.test(String(email).toLowerCase())) {\n      return 'Enter a valid email address.';\n    }\n\n    var usernameRegex = /^(?!.*\\.\\.)(?!.*\\.$)[^\\W][\\w.]{0,29}$/;\n\n    if (!usernameRegex.test(username)) {\n      return 'Usernames can only use letters, numbers, underscores and periods';\n    } else if (username.length > 20) {\n      return 'Username no more than 50 characters';\n    }\n\n    if (password.length < 6) {\n      return 'Password min 6 characters';\n    }\n\n    return false;\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var error, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              error = validate();\n\n              if (!error) {\n                _context.next = 5;\n                break;\n              }\n\n              setError(error);\n              return _context.abrupt(\"return\", false);\n\n            case 5:\n              _context.prev = 5;\n              _context.next = 8;\n              return signup({\n                variables: {\n                  input: {\n                    fullName: fullName,\n                    email: email,\n                    password: password,\n                    username: username\n                  }\n                }\n              });\n\n            case 8:\n              response = _context.sent;\n              localStorage.setItem('token', response.data.signup.token);\n              _context.next = 12;\n              return refetch();\n\n            case 12:\n              history.push(Routes.HOME);\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](5);\n              setError(_context.t0.graphQLErrors[0].message);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 15]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var fullName = values.fullName,\n      email = values.email,\n      password = values.password,\n      username = values.username;\n  return /*#__PURE__*/_jsxDEV(Root, {\n    maxWidth: \"lg\",\n    children: [/*#__PURE__*/_jsxDEV(Head, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Welcome, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Heading, {\n          color: \"white\",\n          children: \"Connect with friends and the world around you.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"See photos and updates from your friends.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Follow your interests.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Hear what people are talking about.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(Spacing, {\n        bottom: \"md\",\n        children: /*#__PURE__*/_jsxDEV(H1, {\n          children: \"Create Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: function onSubmit(e) {\n          return handleSubmit(e, signup);\n        },\n        children: [/*#__PURE__*/_jsxDEV(InputText, {\n          type: \"text\",\n          name: \"fullName\",\n          values: fullName,\n          onChange: handleChange,\n          placeholder: \"Full name\",\n          borderColor: \"white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Spacing, {\n          top: \"xs\",\n          bottom: \"xs\",\n          children: /*#__PURE__*/_jsxDEV(InputText, {\n            type: \"text\",\n            name: \"email\",\n            values: email,\n            onChange: handleChange,\n            placeholder: \"Email\",\n            borderColor: \"white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(InputText, {\n          type: \"text\",\n          name: \"username\",\n          values: username,\n          onChange: handleChange,\n          placeholder: \"Username\",\n          borderColor: \"white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Spacing, {\n          top: \"xs\",\n          bottom: \"xs\",\n          children: /*#__PURE__*/_jsxDEV(InputText, {\n            type: \"password\",\n            name: \"password\",\n            values: password,\n            onChange: handleChange,\n            placeholder: \"Password\",\n            borderColor: \"white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, _this), error && /*#__PURE__*/_jsxDEV(Spacing, {\n          bottom: \"sm\",\n          top: \"sm\",\n          children: /*#__PURE__*/_jsxDEV(Error, {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(Spacing, {\n          top: \"sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          size: \"large\",\n          disabled: loading,\n          children: \"Sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(SignUp, \"BotT7vBUUJrgol9/0MCv4F2+QEE=\", false, function () {\n  return [useMutation];\n});\n\n_c5 = SignUp;\nSignUp.propTypes = {\n  history: PropTypes.object.isRequired,\n  refetch: PropTypes.func.isRequired\n};\nexport default _c6 = withRouter(SignUp);\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"Root\");\n$RefreshReg$(_c2, \"Welcome\");\n$RefreshReg$(_c3, \"Heading\");\n$RefreshReg$(_c4, \"Form\");\n$RefreshReg$(_c5, \"SignUp\");\n$RefreshReg$(_c6, \"%default%\");","map":{"version":3,"sources":["/Users/hieutran/Desktop/create-social-network-master/frontend/src/pages/Auth/SignUp.js"],"names":["React","useState","PropTypes","styled","withRouter","useMutation","Spacing","Container","H1","Error","InputText","Button","Head","SIGN_UP","Routes","Root","p","theme","screen","md","Welcome","div","colors","white","xs","Heading","spacing","sm","Form","radius","SignUp","history","refetch","error","setError","fullName","username","email","password","values","setValues","signup","loading","handleChange","e","target","name","value","validate","length","emailRegex","test","String","toLowerCase","usernameRegex","handleSubmit","preventDefault","variables","input","response","localStorage","setItem","data","token","push","HOME","graphQLErrors","message","propTypes","object","isRequired","func"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { withRouter } from 'react-router-dom';\nimport { useMutation } from '@apollo/client';\n\nimport { Spacing, Container } from 'components/Layout';\nimport { H1, Error } from 'components/Text';\nimport { InputText, Button } from 'components/Form';\nimport Head from 'components/Head';\n\nimport { SIGN_UP } from 'graphql/user';\n\nimport * as Routes from 'routes';\n\nconst Root = styled(Container)`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-top: 60px;\n\n  @media (min-width: ${(p) => p.theme.screen.md}) {\n    justify-content: space-between;\n    margin-top: 120px;\n  }\n`;\n\nconst Welcome = styled.div`\n  display: none;\n  flex-direction: column;\n  color: ${(p) => p.theme.colors.white};\n  max-width: ${(p) => p.theme.screen.xs};\n\n  @media (min-width: ${(p) => p.theme.screen.md}) {\n    display: flex;\n  }\n`;\n\nconst Heading = styled(H1)`\n  margin-bottom: ${(p) => p.theme.spacing.sm};\n`;\n\nconst Form = styled.div`\n  padding: ${(p) => p.theme.spacing.md};\n  border-radius: ${(p) => p.theme.radius.sm};\n  background-color: rgba(255, 255, 255, 0.8);\n  width: 100%;\n\n  @media (min-width: ${(p) => p.theme.screen.sm}) {\n    width: 450px;\n  }\n`;\n\n/**\n * Sign Up page\n */\nconst SignUp = ({ history, refetch }) => {\n  const [error, setError] = useState('');\n  const [values, setValues] = useState({\n    fullName: '',\n    username: '',\n    email: '',\n    password: '',\n  });\n  const [signup, { loading }] = useMutation(SIGN_UP);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setValues({ ...values, [name]: value });\n  };\n\n  const validate = () => {\n    if (!fullName || !email || !username || !password) {\n      return 'All fields are required';\n    }\n\n    if (fullName.length > 50) {\n      return 'Full name no more than 50 characters';\n    }\n\n    const emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    if (!emailRegex.test(String(email).toLowerCase())) {\n      return 'Enter a valid email address.';\n    }\n\n    const usernameRegex = /^(?!.*\\.\\.)(?!.*\\.$)[^\\W][\\w.]{0,29}$/;\n    if (!usernameRegex.test(username)) {\n      return 'Usernames can only use letters, numbers, underscores and periods';\n    } else if (username.length > 20) {\n      return 'Username no more than 50 characters';\n    }\n\n    if (password.length < 6) {\n      return 'Password min 6 characters';\n    }\n\n    return false;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const error = validate();\n    if (error) {\n      setError(error);\n      return false;\n    }\n\n    try {\n      const response = await signup({\n        variables: { input: { fullName, email, password, username } },\n      });\n      localStorage.setItem('token', response.data.signup.token);\n      await refetch();\n      history.push(Routes.HOME);\n    } catch (error) {\n      setError(error.graphQLErrors[0].message);\n    }\n  };\n\n  const { fullName, email, password, username } = values;\n  return (\n    <Root maxWidth=\"lg\">\n      <Head />\n\n      <Welcome>\n        <div>\n          <Heading color=\"white\">Connect with friends and the world around you.</Heading>\n        </div>\n\n        <p>See photos and updates from your friends.</p>\n        <p>Follow your interests.</p>\n        <p>Hear what people are talking about.</p>\n      </Welcome>\n\n      <Form>\n        <Spacing bottom=\"md\">\n          <H1>Create Account</H1>\n        </Spacing>\n\n        <form onSubmit={(e) => handleSubmit(e, signup)}>\n          <InputText\n            type=\"text\"\n            name=\"fullName\"\n            values={fullName}\n            onChange={handleChange}\n            placeholder=\"Full name\"\n            borderColor=\"white\"\n          />\n          <Spacing top=\"xs\" bottom=\"xs\">\n            <InputText\n              type=\"text\"\n              name=\"email\"\n              values={email}\n              onChange={handleChange}\n              placeholder=\"Email\"\n              borderColor=\"white\"\n            />\n          </Spacing>\n          <InputText\n            type=\"text\"\n            name=\"username\"\n            values={username}\n            onChange={handleChange}\n            placeholder=\"Username\"\n            borderColor=\"white\"\n          />\n          <Spacing top=\"xs\" bottom=\"xs\">\n            <InputText\n              type=\"password\"\n              name=\"password\"\n              values={password}\n              onChange={handleChange}\n              placeholder=\"Password\"\n              borderColor=\"white\"\n            />\n          </Spacing>\n          {error && (\n            <Spacing bottom=\"sm\" top=\"sm\">\n              <Error>{error}</Error>\n            </Spacing>\n          )}\n          <Spacing top=\"sm\" />\n          <Button size=\"large\" disabled={loading}>\n            Sign up\n          </Button>\n        </form>\n      </Form>\n    </Root>\n  );\n};\n\nSignUp.propTypes = {\n  history: PropTypes.object.isRequired,\n  refetch: PropTypes.func.isRequired,\n};\n\nexport default withRouter(SignUp);\n"]},"metadata":{},"sourceType":"module"}