{"ast":null,"code":"import _slicedToArray from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/hieutran/Desktop/create-social-network-master/frontend/src/pages/Profile/ProfilePosts.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useQuery } from '@apollo/client';\nimport { generatePath } from 'react-router-dom';\nimport Skeleton from 'components/Skeleton';\nimport Modal from 'components/Modal';\nimport PostPopup from 'components/PostPopup';\nimport PostCard from 'components/PostCard';\nimport { Spacing } from 'components/Layout';\nimport InfiniteScroll from 'components/InfiniteScroll';\nimport { Loading } from 'components/Loading';\nimport Empty from 'components/Empty';\nimport { PROFILE_PAGE_POSTS_LIMIT } from 'constants/DataLimit';\nimport { GET_USER_POSTS } from 'graphql/user';\nimport * as Routes from 'routes';\n/**\n * Renders posts in profile page\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar ProfilePosts = function ProfilePosts(_ref) {\n  _s();\n\n  var username = _ref.username;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isPostPopupOpen = _useState2[0],\n      setIsPostPopupOpen = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalPostId = _useState4[0],\n      setModalPostId = _useState4[1];\n\n  var variables = {\n    username: username,\n    skip: 0,\n    limit: PROFILE_PAGE_POSTS_LIMIT\n  };\n\n  var _useQuery = useQuery(GET_USER_POSTS, {\n    variables: variables,\n    notifyOnNetworkStatusChange: true\n  }),\n      data = _useQuery.data,\n      loading = _useQuery.loading,\n      fetchMore = _useQuery.fetchMore,\n      networkStatus = _useQuery.networkStatus;\n\n  var _openModal = function openModal(postId) {\n    window.history.pushState('', '', generatePath(Routes.POST, {\n      id: postId\n    }));\n    setModalPostId(postId);\n    setIsPostPopupOpen(true);\n  };\n\n  var closeModal = function closeModal() {\n    window.history.pushState('', '', generatePath(Routes.USER_PROFILE, {\n      username: username\n    }));\n    setIsPostPopupOpen(false);\n  };\n\n  if (loading && networkStatus === 1) {\n    return /*#__PURE__*/_jsxDEV(Skeleton, {\n      height: 500,\n      bottom: \"lg\",\n      top: \"lg\",\n      count: PROFILE_PAGE_POSTS_LIMIT\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 12\n    }, _this);\n  }\n\n  var _data$getUserPosts = data.getUserPosts,\n      posts = _data$getUserPosts.posts,\n      count = _data$getUserPosts.count;\n\n  if (!posts.length > 0) {\n    return /*#__PURE__*/_jsxDEV(Spacing, {\n      bottom: \"lg\",\n      children: /*#__PURE__*/_jsxDEV(Empty, {\n        text: \"No posts yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, _this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n    data: posts,\n    dataKey: \"getUserPosts.posts\",\n    count: parseInt(count),\n    variables: variables,\n    fetchMore: fetchMore,\n    children: function children(data) {\n      return data.map(function (post, i) {\n        var showNextLoading = loading && networkStatus === 3 && data.length - 1 === i;\n        return /*#__PURE__*/_jsxDEV(Fragment, {\n          children: [modalPostId === post.id && /*#__PURE__*/_jsxDEV(Modal, {\n            open: isPostPopupOpen,\n            onClose: closeModal,\n            children: /*#__PURE__*/_jsxDEV(PostPopup, {\n              id: post.id,\n              closeModal: closeModal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(Spacing, {\n            bottom: \"lg\",\n            children: /*#__PURE__*/_jsxDEV(PostCard, {\n              author: post.author,\n              postId: post.id,\n              imagePublicId: post.imagePublicId,\n              comments: post.comments,\n              title: post.title,\n              image: post.image,\n              likes: post.likes,\n              createdAt: post.createdAt,\n              openModal: function openModal() {\n                return _openModal(post.id);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, _this), showNextLoading && /*#__PURE__*/_jsxDEV(Loading, {\n            top: \"lg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 35\n          }, _this)]\n        }, post.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, _this);\n      });\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(ProfilePosts, \"Pe7nEzIOKl2Na2B+nzwD4I66/Is=\", false, function () {\n  return [useQuery];\n});\n\n_c = ProfilePosts;\nProfilePosts.propTypes = {\n  username: PropTypes.string.isRequired\n};\nexport default ProfilePosts;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfilePosts\");","map":{"version":3,"sources":["/Users/hieutran/Desktop/create-social-network-master/frontend/src/pages/Profile/ProfilePosts.js"],"names":["React","Fragment","useState","PropTypes","useQuery","generatePath","Skeleton","Modal","PostPopup","PostCard","Spacing","InfiniteScroll","Loading","Empty","PROFILE_PAGE_POSTS_LIMIT","GET_USER_POSTS","Routes","ProfilePosts","username","isPostPopupOpen","setIsPostPopupOpen","modalPostId","setModalPostId","variables","skip","limit","notifyOnNetworkStatusChange","data","loading","fetchMore","networkStatus","openModal","postId","window","history","pushState","POST","id","closeModal","USER_PROFILE","getUserPosts","posts","count","length","parseInt","map","post","i","showNextLoading","author","imagePublicId","comments","title","image","likes","createdAt","propTypes","string","isRequired"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useQuery } from '@apollo/client';\nimport { generatePath } from 'react-router-dom';\n\nimport Skeleton from 'components/Skeleton';\nimport Modal from 'components/Modal';\nimport PostPopup from 'components/PostPopup';\nimport PostCard from 'components/PostCard';\nimport { Spacing } from 'components/Layout';\nimport InfiniteScroll from 'components/InfiniteScroll';\nimport { Loading } from 'components/Loading';\nimport Empty from 'components/Empty';\n\nimport { PROFILE_PAGE_POSTS_LIMIT } from 'constants/DataLimit';\n\nimport { GET_USER_POSTS } from 'graphql/user';\n\nimport * as Routes from 'routes';\n\n/**\n * Renders posts in profile page\n */\nconst ProfilePosts = ({ username }) => {\n  const [isPostPopupOpen, setIsPostPopupOpen] = useState(false);\n  const [modalPostId, setModalPostId] = useState('');\n  const variables = { username, skip: 0, limit: PROFILE_PAGE_POSTS_LIMIT };\n  const { data, loading, fetchMore, networkStatus } = useQuery(GET_USER_POSTS, {\n    variables,\n    notifyOnNetworkStatusChange: true,\n  });\n\n  const openModal = (postId) => {\n    window.history.pushState('', '', generatePath(Routes.POST, { id: postId }));\n    setModalPostId(postId);\n    setIsPostPopupOpen(true);\n  };\n\n  const closeModal = () => {\n    window.history.pushState('', '', generatePath(Routes.USER_PROFILE, { username }));\n    setIsPostPopupOpen(false);\n  };\n\n  if (loading && networkStatus === 1) {\n    return <Skeleton height={500} bottom=\"lg\" top=\"lg\" count={PROFILE_PAGE_POSTS_LIMIT} />;\n  }\n\n  const { posts, count } = data.getUserPosts;\n  if (!posts.length > 0) {\n    return (\n      <Spacing bottom=\"lg\">\n        <Empty text=\"No posts yet.\" />\n      </Spacing>\n    );\n  }\n\n  return (\n    <InfiniteScroll\n      data={posts}\n      dataKey=\"getUserPosts.posts\"\n      count={parseInt(count)}\n      variables={variables}\n      fetchMore={fetchMore}\n    >\n      {(data) => {\n        return data.map((post, i) => {\n          const showNextLoading = loading && networkStatus === 3 && data.length - 1 === i;\n\n          return (\n            <Fragment key={post.id}>\n              {modalPostId === post.id && (\n                <Modal open={isPostPopupOpen} onClose={closeModal}>\n                  <PostPopup id={post.id} closeModal={closeModal} />\n                </Modal>\n              )}\n\n              <Spacing bottom=\"lg\">\n                <PostCard\n                  author={post.author}\n                  postId={post.id}\n                  imagePublicId={post.imagePublicId}\n                  comments={post.comments}\n                  title={post.title}\n                  image={post.image}\n                  likes={post.likes}\n                  createdAt={post.createdAt}\n                  openModal={() => openModal(post.id)}\n                />\n              </Spacing>\n\n              {showNextLoading && <Loading top=\"lg\" />}\n            </Fragment>\n          );\n        });\n      }}\n    </InfiniteScroll>\n  );\n};\n\nProfilePosts.propTypes = {\n  username: PropTypes.string.isRequired,\n};\n\nexport default ProfilePosts;\n"]},"metadata":{},"sourceType":"module"}