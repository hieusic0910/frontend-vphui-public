{"ast":null,"code":"import _slicedToArray from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"/Users/hieutran/Desktop/create-social-network-master/frontend/src/pages/Messages/MessagesChatHeading.js\",\n    _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _templateObject6,\n    _templateObject7,\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\nimport { generatePath, withRouter, Link } from 'react-router-dom';\nimport { useSubscription } from '@apollo/client';\nimport Search from 'components/Search';\nimport Avatar from 'components/Avatar';\nimport { IS_USER_ONLINE_SUBSCRIPTION } from 'graphql/user';\nimport * as Routes from 'routes';\nimport { useStore } from 'store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Root = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  position: relative;\\n  background-color: \", \";\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  height: 60px;\\n  border-bottom: 1px solid \", \";\\n  z-index: 1;\\n\"])), function (p) {\n  return p.theme.colors.white;\n}, function (p) {\n  return p.theme.colors.border.main;\n});\n_c = Root;\nvar InputContainer = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  padding: 0 \", \";\\n  color: \", \";\\n  font-size: \", \";\\n\"])), function (p) {\n  return p.theme.spacing.sm;\n}, function (p) {\n  return p.theme.colors.text.secondary;\n}, function (p) {\n  return p.theme.font.size.xs;\n});\n_c2 = InputContainer;\nvar To = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  margin-top: 1px;\\n\"])));\n_c3 = To;\nvar User = styled(Link)(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  margin: 0 \", \";\\n  padding: \", \" \", \";\\n  border-radius: \", \";\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  text-decoration: none;\\n\"])), function (p) {\n  return p.theme.spacing.xxs;\n}, function (p) {\n  return p.theme.spacing.xxs;\n}, function (p) {\n  return p.theme.spacing.xxs;\n}, function (p) {\n  return p.theme.radius.md;\n});\n_c4 = User;\nvar Info = styled.div(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  padding-left: \", \";\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-start;\\n  align-items: center;\\n\"])), function (p) {\n  return p.theme.spacing.xs;\n});\n_c5 = Info;\nvar FullName = styled.div(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  font-size: \", \";\\n  color: \", \";\\n  font-weight: \", \";\\n\"])), function (p) {\n  return p.theme.font.size.sm;\n}, function (p) {\n  return p.theme.colors.text.primary;\n}, function (p) {\n  return p.theme.font.weight.bold;\n});\n_c6 = FullName;\nvar Online = styled.div(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n  display: inline-block;\\n  width: 8px;\\n  height: 8px;\\n  background-color: \", \";\\n  margin-left: \", \";\\n  border-radius: 50%;\\n\"])), function (p) {\n  return p.theme.colors.success;\n}, function (p) {\n  return p.theme.spacing.xs;\n});\n/**\n * Heading component for messages chat\n */\n\n_c7 = Online;\n\nvar MessagesChatHeading = function MessagesChatHeading(_ref) {\n  _s();\n\n  var location = _ref.location,\n      match = _ref.match,\n      chatUser = _ref.chatUser;\n\n  var _useStore = useStore(),\n      _useStore2 = _slicedToArray(_useStore, 1),\n      auth = _useStore2[0].auth;\n\n  var _useSubscription = useSubscription(IS_USER_ONLINE_SUBSCRIPTION, {\n    variables: {\n      authUserId: auth.user.id,\n      userId: chatUser ? chatUser.id : null\n    },\n    skip: !chatUser\n  }),\n      data = _useSubscription.data,\n      loading = _useSubscription.loading; // Update user's isOnline field in real time\n\n\n  if (!loading && data && chatUser) {\n    chatUser.isOnline = data.isUserOnline.isOnline;\n  }\n\n  if (match.params.userId === Routes.NEW_ID_VALUE || !chatUser) {\n    return /*#__PURE__*/_jsxDEV(Root, {\n      children: /*#__PURE__*/_jsxDEV(InputContainer, {\n        children: [/*#__PURE__*/_jsxDEV(To, {\n          children: \"To:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Search, {\n          location: location,\n          backgroundColor: \"white\",\n          hideIcon: true,\n          forMessage: true,\n          placeholder: \"Type the name of a person\",\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, _this);\n  }\n\n  if (chatUser) {\n    return /*#__PURE__*/_jsxDEV(Root, {\n      children: /*#__PURE__*/_jsxDEV(User, {\n        to: generatePath(Routes.USER_PROFILE, {\n          username: chatUser.username\n        }),\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          image: chatUser.image,\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Info, {\n          children: [/*#__PURE__*/_jsxDEV(FullName, {\n            children: chatUser.fullName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, _this), chatUser.isOnline && /*#__PURE__*/_jsxDEV(Online, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 35\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, _this);\n  }\n\n  return null;\n};\n\n_s(MessagesChatHeading, \"vJUENYIGUPhWvJ9QUo7fULJH+k0=\", false, function () {\n  return [useStore, useSubscription];\n});\n\n_c8 = MessagesChatHeading;\nMessagesChatHeading.propTypes = {\n  match: PropTypes.object.isRequired,\n  chatUser: PropTypes.object\n};\nexport default _c9 = withRouter(MessagesChatHeading);\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n\n$RefreshReg$(_c, \"Root\");\n$RefreshReg$(_c2, \"InputContainer\");\n$RefreshReg$(_c3, \"To\");\n$RefreshReg$(_c4, \"User\");\n$RefreshReg$(_c5, \"Info\");\n$RefreshReg$(_c6, \"FullName\");\n$RefreshReg$(_c7, \"Online\");\n$RefreshReg$(_c8, \"MessagesChatHeading\");\n$RefreshReg$(_c9, \"%default%\");","map":{"version":3,"sources":["/Users/hieutran/Desktop/create-social-network-master/frontend/src/pages/Messages/MessagesChatHeading.js"],"names":["React","styled","PropTypes","generatePath","withRouter","Link","useSubscription","Search","Avatar","IS_USER_ONLINE_SUBSCRIPTION","Routes","useStore","Root","div","p","theme","colors","white","border","main","InputContainer","spacing","sm","text","secondary","font","size","xs","To","User","xxs","radius","md","Info","FullName","primary","weight","bold","Online","success","MessagesChatHeading","location","match","chatUser","auth","variables","authUserId","user","id","userId","skip","data","loading","isOnline","isUserOnline","params","NEW_ID_VALUE","USER_PROFILE","username","image","fullName","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\nimport { generatePath, withRouter, Link } from 'react-router-dom';\nimport { useSubscription } from '@apollo/client';\n\nimport Search from 'components/Search';\nimport Avatar from 'components/Avatar';\n\nimport { IS_USER_ONLINE_SUBSCRIPTION } from 'graphql/user';\n\nimport * as Routes from 'routes';\n\nimport { useStore } from 'store';\n\nconst Root = styled.div`\n  position: relative;\n  background-color: ${(p) => p.theme.colors.white};\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 60px;\n  border-bottom: 1px solid ${(p) => p.theme.colors.border.main};\n  z-index: 1;\n`;\n\nconst InputContainer = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0 ${(p) => p.theme.spacing.sm};\n  color: ${(p) => p.theme.colors.text.secondary};\n  font-size: ${(p) => p.theme.font.size.xs};\n`;\n\nconst To = styled.div`\n  margin-top: 1px;\n`;\n\nconst User = styled(Link)`\n  margin: 0 ${(p) => p.theme.spacing.xxs};\n  padding: ${(p) => p.theme.spacing.xxs} ${(p) => p.theme.spacing.xxs};\n  border-radius: ${(p) => p.theme.radius.md};\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  text-decoration: none;\n`;\n\nconst Info = styled.div`\n  padding-left: ${(p) => p.theme.spacing.xs};\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n`;\n\nconst FullName = styled.div`\n  font-size: ${(p) => p.theme.font.size.sm};\n  color: ${(p) => p.theme.colors.text.primary};\n  font-weight: ${(p) => p.theme.font.weight.bold};\n`;\n\nconst Online = styled.div`\n  display: inline-block;\n  width: 8px;\n  height: 8px;\n  background-color: ${(p) => p.theme.colors.success};\n  margin-left: ${(p) => p.theme.spacing.xs};\n  border-radius: 50%;\n`;\n\n/**\n * Heading component for messages chat\n */\nconst MessagesChatHeading = ({ location, match, chatUser }) => {\n  const [{ auth }] = useStore();\n\n  const { data, loading } = useSubscription(IS_USER_ONLINE_SUBSCRIPTION, {\n    variables: {\n      authUserId: auth.user.id,\n      userId: chatUser ? chatUser.id : null,\n    },\n    skip: !chatUser,\n  });\n\n  // Update user's isOnline field in real time\n  if (!loading && data && chatUser) {\n    chatUser.isOnline = data.isUserOnline.isOnline;\n  }\n\n  if (match.params.userId === Routes.NEW_ID_VALUE || !chatUser) {\n    return (\n      <Root>\n        <InputContainer>\n          <To>To:</To>\n          <Search\n            location={location}\n            backgroundColor=\"white\"\n            hideIcon\n            forMessage\n            placeholder=\"Type the name of a person\"\n            autoFocus\n          />\n        </InputContainer>\n      </Root>\n    );\n  }\n\n  if (chatUser) {\n    return (\n      <Root>\n        <User\n          to={generatePath(Routes.USER_PROFILE, {\n            username: chatUser.username,\n          })}\n        >\n          <Avatar image={chatUser.image} size={40} />\n\n          <Info>\n            <FullName>{chatUser.fullName}</FullName>\n\n            {chatUser.isOnline && <Online />}\n          </Info>\n        </User>\n      </Root>\n    );\n  }\n\n  return null;\n};\n\nMessagesChatHeading.propTypes = {\n  match: PropTypes.object.isRequired,\n  chatUser: PropTypes.object,\n};\n\nexport default withRouter(MessagesChatHeading);\n"]},"metadata":{},"sourceType":"module"}