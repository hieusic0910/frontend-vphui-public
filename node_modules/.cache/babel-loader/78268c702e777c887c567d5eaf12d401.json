{"ast":null,"code":"import _regeneratorRuntime from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"/Users/hieutran/Desktop/create-social-network-master/frontend/src/components/PostCard/PostCard.js\",\n    _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _templateObject6,\n    _templateObject7,\n    _templateObject8,\n    _templateObject9,\n    _templateObject10,\n    _templateObject11,\n    _templateObject12,\n    _templateObject13,\n    _templateObject14,\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { generatePath } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { useApolloClient } from '@apollo/client';\nimport Comment from 'components/Comment';\nimport CreateComment from 'components/CreateComment';\nimport Like from 'components/Like';\nimport { DotsIcon, PostCommentIcon } from 'components/icons';\nimport { Spacing } from 'components/Layout';\nimport { A, H3 } from 'components/Text';\nimport { Button } from 'components/Form';\nimport PostCardOption from 'components/PostCard/PostCardOption';\nimport Modal from 'components/Modal';\nimport Avatar from 'components/Avatar';\nimport { GET_FOLLOWED_POSTS, DELETE_POST } from 'graphql/post';\nimport { GET_AUTH_USER } from 'graphql/user';\nimport { GET_USER_POSTS } from 'graphql/user';\nimport { HOME_PAGE_POSTS_LIMIT, PROFILE_PAGE_POSTS_LIMIT } from 'constants/DataLimit';\nimport { useStore } from 'store';\nimport * as Routes from 'routes';\nimport { timeAgo } from 'utils/date';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar Root = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  border-radius: \", \";\\n  padding-bottom: \", \";\\n  background-color: \", \";\\n  border: 1px solid \", \";\\n\"])), function (p) {\n  return p.theme.radius.sm;\n}, function (p) {\n  return p.theme.spacing.xs;\n}, function (p) {\n  return p.theme.colors.white;\n}, function (p) {\n  return p.theme.colors.border.main;\n});\n_c = Root;\nvar TopRow = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-items: flex-start;\\n  padding: \", \" \", \";\\n\"])), function (p) {\n  return p.theme.spacing.xs;\n}, function (p) {\n  return p.theme.spacing.sm;\n});\n_c2 = TopRow;\nvar CreatedAt = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  font-size: \", \";\\n  color: \", \";\\n  border-bottom: 1px solid \", \";\\n  border: 0;\\n  margin-top: 2px;\\n\"])), function (p) {\n  return p.theme.font.size.xxs;\n}, function (p) {\n  return p.theme.colors.text.hint;\n}, function (p) {\n  return p.theme.colors.text.secondary;\n});\n_c3 = CreatedAt;\nvar Author = styled(A)(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n\"])));\n_c4 = Author;\nvar Name = styled.span(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  font-size: \", \";\\n  font-weight: \", \";\\n  color: \", \";\\n\"])), function (p) {\n  return p.theme.font.size.xs;\n}, function (p) {\n  return p.theme.font.weight.bold;\n}, function (p) {\n  return p.theme.colors.primary.main;\n});\n_c5 = Name;\nvar Poster = styled.img(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  display: block;\\n  width: 100%;\\n  max-height: 700px;\\n  object-fit: cover;\\n  cursor: pointer;\\n  margin-bottom: \", \";\\n\"])), function (p) {\n  return p.theme.spacing.sm;\n});\n_c6 = Poster;\nvar Title = styled.div(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n  word-break: break-word;\\n  white-space: pre-line;\\n\"])));\n_c7 = Title;\nvar BottomRow = styled.div(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n  overflow: hidden;\\n\"])));\n_c8 = BottomRow;\nvar CountAndIcons = styled.div(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n  padding: 0 \", \";\\n\"])), function (p) {\n  return p.theme.spacing.sm;\n});\n_c9 = CountAndIcons;\nvar Count = styled.div(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding-bottom: \", \";\\n  font-size: \", \";\\n  color: \", \";\\n\"])), function (p) {\n  return p.theme.spacing.xs;\n}, function (p) {\n  return p.theme.font.size.xs;\n}, function (p) {\n  return p.theme.colors.text.secondary;\n});\n_c10 = Count;\nvar Icons = styled.div(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: center;\\n  border-top: 1px solid \", \";\\n\"])), function (p) {\n  return p.theme.colors.border.main;\n});\n_c11 = Icons;\nvar Comments = styled.div(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"\\n  padding: 0 \", \";\\n\"])), function (p) {\n  return p.theme.spacing.sm;\n});\n_c12 = Comments;\nvar StyledButton = styled(Button)(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"\\n  padding: 0;\\n  padding-left: 4px;\\n  font-size: \", \";\\n\"])), function (p) {\n  return p.theme.font.size.xxs;\n});\n_c13 = StyledButton;\nvar CommentLine = styled.div(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"\\n  margin-bottom: 5px;\\n  border-top: 1px solid \", \";\\n\"])), function (p) {\n  return p.theme.colors.border.main;\n});\n/**\n * Component for rendering user post\n */\n\n_c14 = CommentLine;\n\nvar PostCard = function PostCard(_ref) {\n  _s();\n\n  var author = _ref.author,\n      imagePublicId = _ref.imagePublicId,\n      comments = _ref.comments,\n      title = _ref.title,\n      createdAt = _ref.createdAt,\n      image = _ref.image,\n      likes = _ref.likes,\n      postId = _ref.postId,\n      openModal = _ref.openModal;\n\n  var _useStore = useStore(),\n      _useStore2 = _slicedToArray(_useStore, 1),\n      auth = _useStore2[0].auth;\n\n  var client = useApolloClient();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isCommentOpen = _useState2[0],\n      setIsCommentOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isOptionOpen = _useState4[0],\n      setIsOptionOpen = _useState4[1];\n\n  var toggleCreateComment = function toggleCreateComment() {\n    setIsCommentOpen(true);\n  };\n\n  var toggleComment = function toggleComment() {\n    setIsCommentOpen(!isCommentOpen);\n  };\n\n  var closeOption = function closeOption() {\n    return setIsOptionOpen(false);\n  };\n\n  var openOption = function openOption() {\n    return setIsOptionOpen(true);\n  };\n\n  var deletePost = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return client.mutate({\n                mutation: DELETE_POST,\n                variables: {\n                  input: {\n                    id: postId,\n                    imagePublicId: imagePublicId\n                  }\n                },\n                refetchQueries: function refetchQueries() {\n                  return [{\n                    query: GET_FOLLOWED_POSTS,\n                    variables: {\n                      userId: auth.user.id,\n                      skip: 0,\n                      limit: HOME_PAGE_POSTS_LIMIT\n                    }\n                  }, {\n                    query: GET_AUTH_USER\n                  }, {\n                    query: GET_USER_POSTS,\n                    variables: {\n                      username: auth.user.username,\n                      skip: 0,\n                      limit: PROFILE_PAGE_POSTS_LIMIT\n                    }\n                  }];\n                }\n              });\n\n            case 3:\n              _context.next = 7;\n              break;\n\n            case 5:\n              _context.prev = 5;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 7:\n              setIsOptionOpen(false);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 5]]);\n    }));\n\n    return function deletePost() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Root, {\n      children: [/*#__PURE__*/_jsxDEV(Modal, {\n        onClose: closeOption,\n        open: isOptionOpen,\n        children: /*#__PURE__*/_jsxDEV(PostCardOption, {\n          postId: postId,\n          closeOption: closeOption,\n          author: author,\n          deletePost: deletePost\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(TopRow, {\n        children: [/*#__PURE__*/_jsxDEV(Author, {\n          to: generatePath(Routes.USER_PROFILE, {\n            username: author.username\n          }),\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            image: author.image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Spacing, {\n            left: \"xs\",\n            children: [/*#__PURE__*/_jsxDEV(Name, {\n              children: author.fullName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(CreatedAt, {\n              children: timeAgo(createdAt)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          ghost: true,\n          onClick: openOption,\n          children: /*#__PURE__*/_jsxDEV(DotsIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Spacing, {\n        left: \"sm\",\n        bottom: \"sm\",\n        top: \"xs\",\n        right: \"sm\",\n        children: /*#__PURE__*/_jsxDEV(Title, {\n          children: /*#__PURE__*/_jsxDEV(H3, {\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, _this), image && /*#__PURE__*/_jsxDEV(Poster, {\n        src: image,\n        onClick: openModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 19\n      }, _this), /*#__PURE__*/_jsxDEV(BottomRow, {\n        children: [/*#__PURE__*/_jsxDEV(CountAndIcons, {\n          children: [/*#__PURE__*/_jsxDEV(Count, {\n            children: [likes.length, \" likes\", /*#__PURE__*/_jsxDEV(Spacing, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(StyledButton, {\n              onClick: toggleComment,\n              text: true,\n              children: [comments.length, \" comments\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Icons, {\n            children: [/*#__PURE__*/_jsxDEV(Like, {\n              fullWidth: true,\n              withText: true,\n              user: author,\n              postId: postId,\n              likes: likes\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Button, {\n              fullWidth: true,\n              text: true,\n              onClick: toggleCreateComment,\n              children: [/*#__PURE__*/_jsxDEV(PostCommentIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 17\n              }, _this), \" \", /*#__PURE__*/_jsxDEV(Spacing, {\n                inline: true,\n                left: \"xxs\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 37\n              }, _this), \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 67\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, _this), isCommentOpen && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Spacing, {\n            top: \"xs\",\n            children: [/*#__PURE__*/_jsxDEV(CommentLine, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(CreateComment, {\n              post: {\n                id: postId,\n                author: author\n              },\n              focus: isCommentOpen\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, _this), comments.length > 0 && /*#__PURE__*/_jsxDEV(CommentLine, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 39\n          }, _this), /*#__PURE__*/_jsxDEV(Comments, {\n            children: comments.map(function (comment) {\n              return /*#__PURE__*/_jsxDEV(Comment, {\n                comment: comment,\n                postId: postId,\n                postAuthor: author\n              }, comment.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false);\n};\n\n_s(PostCard, \"Q4N/vGwnJUveVfu3V7yjkz3irU0=\", false, function () {\n  return [useStore, useApolloClient];\n});\n\n_c15 = PostCard;\nPostCard.propTypes = {\n  author: PropTypes.object.isRequired,\n  imagePublicId: PropTypes.string,\n  title: PropTypes.string.isRequired,\n  image: PropTypes.string,\n  likes: PropTypes.array.isRequired,\n  comments: PropTypes.array,\n  createdAt: PropTypes.string.isRequired,\n  postId: PropTypes.string.isRequired,\n  openModal: PropTypes.func.isRequired\n};\nexport default PostCard;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15;\n\n$RefreshReg$(_c, \"Root\");\n$RefreshReg$(_c2, \"TopRow\");\n$RefreshReg$(_c3, \"CreatedAt\");\n$RefreshReg$(_c4, \"Author\");\n$RefreshReg$(_c5, \"Name\");\n$RefreshReg$(_c6, \"Poster\");\n$RefreshReg$(_c7, \"Title\");\n$RefreshReg$(_c8, \"BottomRow\");\n$RefreshReg$(_c9, \"CountAndIcons\");\n$RefreshReg$(_c10, \"Count\");\n$RefreshReg$(_c11, \"Icons\");\n$RefreshReg$(_c12, \"Comments\");\n$RefreshReg$(_c13, \"StyledButton\");\n$RefreshReg$(_c14, \"CommentLine\");\n$RefreshReg$(_c15, \"PostCard\");","map":{"version":3,"sources":["/Users/hieutran/Desktop/create-social-network-master/frontend/src/components/PostCard/PostCard.js"],"names":["React","useState","PropTypes","generatePath","styled","useApolloClient","Comment","CreateComment","Like","DotsIcon","PostCommentIcon","Spacing","A","H3","Button","PostCardOption","Modal","Avatar","GET_FOLLOWED_POSTS","DELETE_POST","GET_AUTH_USER","GET_USER_POSTS","HOME_PAGE_POSTS_LIMIT","PROFILE_PAGE_POSTS_LIMIT","useStore","Routes","timeAgo","Root","div","p","theme","radius","sm","spacing","xs","colors","white","border","main","TopRow","CreatedAt","font","size","xxs","text","hint","secondary","Author","Name","span","weight","bold","primary","Poster","img","Title","BottomRow","CountAndIcons","Count","Icons","Comments","StyledButton","CommentLine","PostCard","author","imagePublicId","comments","title","createdAt","image","likes","postId","openModal","auth","client","isCommentOpen","setIsCommentOpen","isOptionOpen","setIsOptionOpen","toggleCreateComment","toggleComment","closeOption","openOption","deletePost","mutate","mutation","variables","input","id","refetchQueries","query","userId","user","skip","limit","username","USER_PROFILE","fullName","length","map","comment","propTypes","object","isRequired","string","array","func"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { generatePath } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { useApolloClient } from '@apollo/client';\n\nimport Comment from 'components/Comment';\nimport CreateComment from 'components/CreateComment';\nimport Like from 'components/Like';\nimport { DotsIcon, PostCommentIcon } from 'components/icons';\nimport { Spacing } from 'components/Layout';\nimport { A, H3 } from 'components/Text';\nimport { Button } from 'components/Form';\nimport PostCardOption from 'components/PostCard/PostCardOption';\nimport Modal from 'components/Modal';\nimport Avatar from 'components/Avatar';\n\nimport { GET_FOLLOWED_POSTS, DELETE_POST } from 'graphql/post';\nimport { GET_AUTH_USER } from 'graphql/user';\nimport { GET_USER_POSTS } from 'graphql/user';\n\nimport { HOME_PAGE_POSTS_LIMIT, PROFILE_PAGE_POSTS_LIMIT } from 'constants/DataLimit';\n\nimport { useStore } from 'store';\n\nimport * as Routes from 'routes';\n\nimport { timeAgo } from 'utils/date';\n\nconst Root = styled.div`\n  width: 100%;\n  border-radius: ${(p) => p.theme.radius.sm};\n  padding-bottom: ${(p) => p.theme.spacing.xs};\n  background-color: ${(p) => p.theme.colors.white};\n  border: 1px solid ${(p) => p.theme.colors.border.main};\n`;\n\nconst TopRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: ${(p) => p.theme.spacing.xs} ${(p) => p.theme.spacing.sm};\n`;\n\nconst CreatedAt = styled.div`\n  font-size: ${(p) => p.theme.font.size.xxs};\n  color: ${(p) => p.theme.colors.text.hint};\n  border-bottom: 1px solid ${(p) => p.theme.colors.text.secondary};\n  border: 0;\n  margin-top: 2px;\n`;\n\nconst Author = styled(A)`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst Name = styled.span`\n  font-size: ${(p) => p.theme.font.size.xs};\n  font-weight: ${(p) => p.theme.font.weight.bold};\n  color: ${(p) => p.theme.colors.primary.main};\n`;\n\nconst Poster = styled.img`\n  display: block;\n  width: 100%;\n  max-height: 700px;\n  object-fit: cover;\n  cursor: pointer;\n  margin-bottom: ${(p) => p.theme.spacing.sm};\n`;\n\nconst Title = styled.div`\n  word-break: break-word;\n  white-space: pre-line;\n`;\n\nconst BottomRow = styled.div`\n  overflow: hidden;\n`;\n\nconst CountAndIcons = styled.div`\n  padding: 0 ${(p) => p.theme.spacing.sm};\n`;\n\nconst Count = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding-bottom: ${(p) => p.theme.spacing.xs};\n  font-size: ${(p) => p.theme.font.size.xs};\n  color: ${(p) => p.theme.colors.text.secondary};\n`;\n\nconst Icons = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  border-top: 1px solid ${(p) => p.theme.colors.border.main};\n`;\n\nconst Comments = styled.div`\n  padding: 0 ${(p) => p.theme.spacing.sm};\n`;\n\nconst StyledButton = styled(Button)`\n  padding: 0;\n  padding-left: 4px;\n  font-size: ${(p) => p.theme.font.size.xxs};\n`;\n\nconst CommentLine = styled.div`\n  margin-bottom: 5px;\n  border-top: 1px solid ${(p) => p.theme.colors.border.main};\n`;\n\n/**\n * Component for rendering user post\n */\nconst PostCard = ({ author, imagePublicId, comments, title, createdAt, image, likes, postId, openModal }) => {\n  const [{ auth }] = useStore();\n  const client = useApolloClient();\n  const [isCommentOpen, setIsCommentOpen] = useState(false);\n  const [isOptionOpen, setIsOptionOpen] = useState(false);\n\n  const toggleCreateComment = () => {\n    setIsCommentOpen(true);\n  };\n\n  const toggleComment = () => {\n    setIsCommentOpen(!isCommentOpen);\n  };\n\n  const closeOption = () => setIsOptionOpen(false);\n\n  const openOption = () => setIsOptionOpen(true);\n\n  const deletePost = async () => {\n    try {\n      await client.mutate({\n        mutation: DELETE_POST,\n        variables: { input: { id: postId, imagePublicId } },\n        refetchQueries: () => [\n          {\n            query: GET_FOLLOWED_POSTS,\n            variables: {\n              userId: auth.user.id,\n              skip: 0,\n              limit: HOME_PAGE_POSTS_LIMIT,\n            },\n          },\n          { query: GET_AUTH_USER },\n          {\n            query: GET_USER_POSTS,\n            variables: {\n              username: auth.user.username,\n              skip: 0,\n              limit: PROFILE_PAGE_POSTS_LIMIT,\n            },\n          },\n        ],\n      });\n    } catch (err) {}\n\n    setIsOptionOpen(false);\n  };\n\n  return (\n    <>\n      <Root>\n        <Modal onClose={closeOption} open={isOptionOpen}>\n          <PostCardOption postId={postId} closeOption={closeOption} author={author} deletePost={deletePost} />\n        </Modal>\n\n        <TopRow>\n          <Author\n            to={generatePath(Routes.USER_PROFILE, {\n              username: author.username,\n            })}\n          >\n            <Avatar image={author.image} />\n\n            <Spacing left=\"xs\">\n              <Name>{author.fullName}</Name>\n              <CreatedAt>{timeAgo(createdAt)}</CreatedAt>\n            </Spacing>\n          </Author>\n\n          <Button ghost onClick={openOption}>\n            <DotsIcon />\n          </Button>\n        </TopRow>\n\n        <Spacing left=\"sm\" bottom=\"sm\" top=\"xs\" right=\"sm\">\n          <Title>\n            <H3>{title}</H3>\n          </Title>\n        </Spacing>\n\n        {image && <Poster src={image} onClick={openModal} />}\n\n        <BottomRow>\n          <CountAndIcons>\n            <Count>\n              {likes.length} likes\n              <Spacing />\n              <StyledButton onClick={toggleComment} text>\n                {comments.length} comments\n              </StyledButton>\n            </Count>\n\n            <Icons>\n              <Like fullWidth withText user={author} postId={postId} likes={likes} />\n\n              <Button fullWidth text onClick={toggleCreateComment}>\n                <PostCommentIcon /> <Spacing inline left=\"xxs\" /> <b>Comment</b>\n              </Button>\n            </Icons>\n          </CountAndIcons>\n\n          {isCommentOpen && (\n            <>\n              <Spacing top=\"xs\">\n                <CommentLine />\n                <CreateComment post={{ id: postId, author }} focus={isCommentOpen} />\n              </Spacing>\n\n              {comments.length > 0 && <CommentLine />}\n\n              <Comments>\n                {comments.map((comment) => (\n                  <Comment key={comment.id} comment={comment} postId={postId} postAuthor={author} />\n                ))}\n              </Comments>\n            </>\n          )}\n        </BottomRow>\n      </Root>\n    </>\n  );\n};\n\nPostCard.propTypes = {\n  author: PropTypes.object.isRequired,\n  imagePublicId: PropTypes.string,\n  title: PropTypes.string.isRequired,\n  image: PropTypes.string,\n  likes: PropTypes.array.isRequired,\n  comments: PropTypes.array,\n  createdAt: PropTypes.string.isRequired,\n  postId: PropTypes.string.isRequired,\n  openModal: PropTypes.func.isRequired,\n};\n\nexport default PostCard;\n"]},"metadata":{},"sourceType":"module"}