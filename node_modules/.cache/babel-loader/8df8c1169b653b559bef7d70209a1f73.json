{"ast":null,"code":"import _slicedToArray from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/hieutran/Desktop/create-social-network-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"/Users/hieutran/Desktop/create-social-network-master/frontend/src/components/App/Header/Header.js\",\n    _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _templateObject6,\n    _templateObject7,\n    _templateObject8,\n    _templateObject9,\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport styled, { css } from 'styled-components';\nimport { withRouter } from 'react-router-dom';\nimport { NotificationIcon, MenuIcon, EnvelopeOpenIcon } from 'components/icons';\nimport { Container, Spacing } from 'components/Layout';\nimport { A } from 'components/Text';\nimport { Button } from 'components/Form';\nimport Avatar from 'components/Avatar';\nimport Search from 'components/Search';\nimport HeaderDropDowns from './HeaderDropDowns';\nimport { useClickOutside } from 'hooks/useClickOutside';\nimport { useStore } from 'store';\nimport { HEADER_HEIGHT } from 'constants/Layout';\nimport SiteInfo from 'constants/SiteInfo.json';\nimport * as Routes from 'routes';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Root = styled(Container)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  position: sticky;\\n  top: 0;\\n  background-color: \", \";\\n  z-index: \", \";\\n  height: \", \"px;\\n  border-bottom: 1px solid \", \";\\n\\n  @media (min-width: \", \") {\\n    z-index: \", \";\\n  }\\n\"])), function (p) {\n  return p.theme.colors.white;\n}, function (p) {\n  return p.theme.zIndex.md;\n}, HEADER_HEIGHT, function (p) {\n  return p.theme.colors.border.main;\n}, function (p) {\n  return p.theme.screen.md;\n}, function (p) {\n  return p.theme.zIndex.md;\n});\n_c = Root;\nvar Wrapper = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  position: relative;\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: space-between;\\n  height: \", \"px;\\n  margin: 0 auto;\\n  width: 100%;\\n\\n  @media (min-width: \", \") {\\n    width: \", \";\\n  }\\n\"])), HEADER_HEIGHT, function (p) {\n  return parseInt(p.theme.screen.lg, 10) + 20 + 'px';\n}, function (p) {\n  return p.theme.screen.lg;\n});\n_c2 = Wrapper;\nvar LeftSide = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n\"])));\n_c3 = LeftSide;\nvar Hamburger = styled.div(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  cursor: pointer;\\n\\n  @media (min-width: \", \") {\\n    display: none;\\n  }\\n\"])), function (p) {\n  return p.theme.screen.md;\n});\n_c4 = Hamburger;\nvar Logo = styled(A)(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  display: none;\\n  color: \", \";\\n  font-weight: \", \";\\n  font-size: \", \";\\n\\n  &:hover {\\n    color: \", \";\\n  }\\n\\n  @media (min-width: \", \") {\\n    display: block;\\n  }\\n\"])), function (p) {\n  return p.theme.colors.primary.main;\n}, function (p) {\n  return p.theme.font.weight.bold;\n}, function (p) {\n  return p.theme.font.size.sm;\n}, function (p) {\n  return p.theme.colors.primary.main;\n}, function (p) {\n  return p.theme.screen.md;\n});\n_c5 = Logo;\nvar RightSide = styled.div(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  position: relative;\\n\"])));\n_c6 = RightSide;\nvar countCSS = css(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n  top: -6px;\\n  position: absolute;\\n  height: 22px;\\n  width: 22px;\\n  padding: 2px;\\n  letter-spacing: -1px;\\n  border-radius: 50%;\\n  color: \", \";\\n  background-color: \", \";\\n  font-size: \", \";\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  align-items: center;\\n\"])), function (p) {\n  return p.theme.colors.white;\n}, function (p) {\n  return p.theme.colors.error.main;\n}, function (p) {\n  return p.theme.font.size.xxs;\n});\nvar NotificationCount = styled.span(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n  \", \";\\n  right: 54px;\\n\"])), countCSS);\n_c7 = NotificationCount;\nvar MessageCount = styled.span(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n  \", \";\\n  right: 100px;\\n\"])), countCSS);\n/**\n * Header of the App when user is authenticated\n */\n\n_c8 = MessageCount;\n\nvar Header = function Header(_ref) {\n  _s();\n\n  var location = _ref.location,\n      toggleSideBar = _ref.toggleSideBar;\n\n  var _useStore = useStore(),\n      _useStore2 = _slicedToArray(_useStore, 1),\n      auth = _useStore2[0].auth;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      dropdownOpen = _useState2[0],\n      setDropdownOpen = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      dropdownData = _useState4[0],\n      setDropdownData = _useState4[1];\n\n  var messageRef = useRef(null);\n  var notificationRef = useRef(null);\n  var userRef = useRef(null);\n\n  var closeOnClickOutside = function closeOnClickOutside() {\n    if (dropdownOpen) {\n      closeDropDown();\n    }\n  };\n\n  useClickOutside(messageRef, closeOnClickOutside);\n  useClickOutside(notificationRef, closeOnClickOutside);\n  useClickOutside(userRef, closeOnClickOutside);\n\n  var closeDropDown = function closeDropDown() {\n    setDropdownOpen(null);\n    setDropdownData([]);\n  };\n\n  useEffect(function () {\n    return function () {\n      return closeDropDown();\n    };\n  }, [location.pathname]);\n\n  var handleIconClick = function handleIconClick(dropdownType) {\n    if (dropdownOpen) {\n      closeDropDown();\n    } else {\n      if (dropdownType === 'NOTIFICATION') {\n        setDropdownData(auth.user.newNotifications);\n      } else if (dropdownType === 'MESSAGE') {\n        setDropdownData(auth.user.newConversations);\n      }\n\n      setDropdownOpen(dropdownType);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Root, {\n    children: /*#__PURE__*/_jsxDEV(Wrapper, {\n      children: [/*#__PURE__*/_jsxDEV(LeftSide, {\n        children: [/*#__PURE__*/_jsxDEV(Hamburger, {\n          onClick: toggleSideBar,\n          children: /*#__PURE__*/_jsxDEV(MenuIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Logo, {\n          to: Routes.HOME,\n          children: SiteInfo.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Spacing, {\n          left: \"sm\",\n          right: \"md\",\n          children: /*#__PURE__*/_jsxDEV(Search, {\n            location: location,\n            placeholder: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(RightSide, {\n        children: [/*#__PURE__*/_jsxDEV(Spacing, {\n          right: \"md\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            ghost: true,\n            onClick: function onClick() {\n              return handleIconClick('MESSAGE');\n            },\n            children: [auth.user.newConversations.length > 0 && /*#__PURE__*/_jsxDEV(MessageCount, {\n              children: auth.user.newConversations.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(EnvelopeOpenIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Spacing, {\n          right: \"md\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            ghost: true,\n            onClick: function onClick() {\n              return handleIconClick('NOTIFICATION');\n            },\n            children: [auth.user.newNotifications.length > 0 && /*#__PURE__*/_jsxDEV(NotificationCount, {\n              children: auth.user.newNotifications.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(NotificationIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          ghost: true,\n          onClick: function onClick() {\n            return handleIconClick('USER');\n          },\n          children: /*#__PURE__*/_jsxDEV(Avatar, {\n            image: auth.user.image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(HeaderDropDowns, {\n        messageRef: messageRef,\n        notificationRef: notificationRef,\n        userRef: userRef,\n        dropdownOpen: dropdownOpen,\n        dropdownData: dropdownData,\n        closeDropDown: closeDropDown\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Header, \"JtUt8aiUgq0w3zNtgtKYcRZ0h6E=\", false, function () {\n  return [useStore, useClickOutside, useClickOutside, useClickOutside];\n});\n\n_c9 = Header;\nHeader.propTypes = {\n  location: PropTypes.object.isRequired,\n  toggleSideBar: PropTypes.func.isRequired\n};\nexport default _c10 = withRouter(Header);\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"Root\");\n$RefreshReg$(_c2, \"Wrapper\");\n$RefreshReg$(_c3, \"LeftSide\");\n$RefreshReg$(_c4, \"Hamburger\");\n$RefreshReg$(_c5, \"Logo\");\n$RefreshReg$(_c6, \"RightSide\");\n$RefreshReg$(_c7, \"NotificationCount\");\n$RefreshReg$(_c8, \"MessageCount\");\n$RefreshReg$(_c9, \"Header\");\n$RefreshReg$(_c10, \"%default%\");","map":{"version":3,"sources":["/Users/hieutran/Desktop/create-social-network-master/frontend/src/components/App/Header/Header.js"],"names":["React","useState","useEffect","useRef","PropTypes","styled","css","withRouter","NotificationIcon","MenuIcon","EnvelopeOpenIcon","Container","Spacing","A","Button","Avatar","Search","HeaderDropDowns","useClickOutside","useStore","HEADER_HEIGHT","SiteInfo","Routes","Root","p","theme","colors","white","zIndex","md","border","main","screen","Wrapper","div","parseInt","lg","LeftSide","Hamburger","Logo","primary","font","weight","bold","size","sm","RightSide","countCSS","error","xxs","NotificationCount","span","MessageCount","Header","location","toggleSideBar","auth","dropdownOpen","setDropdownOpen","dropdownData","setDropdownData","messageRef","notificationRef","userRef","closeOnClickOutside","closeDropDown","pathname","handleIconClick","dropdownType","user","newNotifications","newConversations","HOME","name","length","image","propTypes","object","isRequired","func"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport styled, { css } from 'styled-components';\nimport { withRouter } from 'react-router-dom';\n\nimport { NotificationIcon, MenuIcon, EnvelopeOpenIcon } from 'components/icons';\nimport { Container, Spacing } from 'components/Layout';\nimport { A } from 'components/Text';\nimport { Button } from 'components/Form';\nimport Avatar from 'components/Avatar';\nimport Search from 'components/Search';\nimport HeaderDropDowns from './HeaderDropDowns';\n\nimport { useClickOutside } from 'hooks/useClickOutside';\n\nimport { useStore } from 'store';\n\nimport { HEADER_HEIGHT } from 'constants/Layout';\nimport SiteInfo from 'constants/SiteInfo.json';\n\nimport * as Routes from 'routes';\n\nconst Root = styled(Container)`\n  position: sticky;\n  top: 0;\n  background-color: ${(p) => p.theme.colors.white};\n  z-index: ${(p) => p.theme.zIndex.md};\n  height: ${HEADER_HEIGHT}px;\n  border-bottom: 1px solid ${(p) => p.theme.colors.border.main};\n\n  @media (min-width: ${(p) => p.theme.screen.md}) {\n    z-index: ${(p) => p.theme.zIndex.md};\n  }\n`;\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  height: ${HEADER_HEIGHT}px;\n  margin: 0 auto;\n  width: 100%;\n\n  @media (min-width: ${(p) => parseInt(p.theme.screen.lg, 10) + 20 + 'px'}) {\n    width: ${(p) => p.theme.screen.lg};\n  }\n`;\n\nconst LeftSide = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst Hamburger = styled.div`\n  cursor: pointer;\n\n  @media (min-width: ${(p) => p.theme.screen.md}) {\n    display: none;\n  }\n`;\n\nconst Logo = styled(A)`\n  display: none;\n  color: ${(p) => p.theme.colors.primary.main};\n  font-weight: ${(p) => p.theme.font.weight.bold};\n  font-size: ${(p) => p.theme.font.size.sm};\n\n  &:hover {\n    color: ${(p) => p.theme.colors.primary.main};\n  }\n\n  @media (min-width: ${(p) => p.theme.screen.md}) {\n    display: block;\n  }\n`;\n\nconst RightSide = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  position: relative;\n`;\n\nconst countCSS = css`\n  top: -6px;\n  position: absolute;\n  height: 22px;\n  width: 22px;\n  padding: 2px;\n  letter-spacing: -1px;\n  border-radius: 50%;\n  color: ${(p) => p.theme.colors.white};\n  background-color: ${(p) => p.theme.colors.error.main};\n  font-size: ${(p) => p.theme.font.size.xxs};\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst NotificationCount = styled.span`\n  ${countCSS};\n  right: 54px;\n`;\n\nconst MessageCount = styled.span`\n  ${countCSS};\n  right: 100px;\n`;\n\n/**\n * Header of the App when user is authenticated\n */\nconst Header = ({ location, toggleSideBar }) => {\n  const [{ auth }] = useStore();\n\n  const [dropdownOpen, setDropdownOpen] = useState(null);\n  const [dropdownData, setDropdownData] = useState([]);\n\n  const messageRef = useRef(null);\n  const notificationRef = useRef(null);\n  const userRef = useRef(null);\n\n  const closeOnClickOutside = () => {\n    if (dropdownOpen) {\n      closeDropDown();\n    }\n  };\n\n  useClickOutside(messageRef, closeOnClickOutside);\n  useClickOutside(notificationRef, closeOnClickOutside);\n  useClickOutside(userRef, closeOnClickOutside);\n\n  const closeDropDown = () => {\n    setDropdownOpen(null);\n    setDropdownData([]);\n  };\n\n  useEffect(() => {\n    return () => closeDropDown();\n  }, [location.pathname]);\n\n  const handleIconClick = (dropdownType) => {\n    if (dropdownOpen) {\n      closeDropDown();\n    } else {\n      if (dropdownType === 'NOTIFICATION') {\n        setDropdownData(auth.user.newNotifications);\n      } else if (dropdownType === 'MESSAGE') {\n        setDropdownData(auth.user.newConversations);\n      }\n\n      setDropdownOpen(dropdownType);\n    }\n  };\n\n  return (\n    <Root>\n      <Wrapper>\n        <LeftSide>\n          <Hamburger onClick={toggleSideBar}>\n            <MenuIcon />\n          </Hamburger>\n\n          <Logo to={Routes.HOME}>{SiteInfo.name}</Logo>\n\n          <Spacing left=\"sm\" right=\"md\">\n            <Search location={location} placeholder=\"Search\" />\n          </Spacing>\n        </LeftSide>\n\n        <RightSide>\n          <Spacing right=\"md\">\n            <Button ghost onClick={() => handleIconClick('MESSAGE')}>\n              {auth.user.newConversations.length > 0 && (\n                <MessageCount>{auth.user.newConversations.length}</MessageCount>\n              )}\n\n              <EnvelopeOpenIcon />\n            </Button>\n          </Spacing>\n\n          <Spacing right=\"md\">\n            <Button ghost onClick={() => handleIconClick('NOTIFICATION')}>\n              {auth.user.newNotifications.length > 0 && (\n                <NotificationCount>{auth.user.newNotifications.length}</NotificationCount>\n              )}\n              <NotificationIcon />\n            </Button>\n          </Spacing>\n\n          <Button ghost onClick={() => handleIconClick('USER')}>\n            <Avatar image={auth.user.image} />\n          </Button>\n        </RightSide>\n\n        <HeaderDropDowns\n          messageRef={messageRef}\n          notificationRef={notificationRef}\n          userRef={userRef}\n          dropdownOpen={dropdownOpen}\n          dropdownData={dropdownData}\n          closeDropDown={closeDropDown}\n        />\n      </Wrapper>\n    </Root>\n  );\n};\n\nHeader.propTypes = {\n  location: PropTypes.object.isRequired,\n  toggleSideBar: PropTypes.func.isRequired,\n};\n\nexport default withRouter(Header);\n"]},"metadata":{},"sourceType":"module"}